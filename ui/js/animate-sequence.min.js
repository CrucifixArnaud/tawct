// animate-sequence.js - Crucifix Arnaud (hello@crucifixarnaud.com)
// Select items in sequence, and toggle class "on"

/*------------------------*\
	@params
	------------------------
	
	_target    : Parent of the items to animates (ul, div, etc)
	_direction : forward - Animate from first to last child
							 backward - Animate from last to first child
	_duraction : Interval between each step (ms)
	_callback	 : Do you what you want
	
\*------------------------*/ 

var items;var i;var _animateSequence=function(e,t,n,r){items=_cleanWhitespace(e).childNodes;if(t=="backward"){i=items.length-1}else if(t=="forward"){i=0}_step(t,n,function(){r()})};var _step=function(e,t,n){clearTimeout(r);if(i<items.length&&e!="backward"||i>=0&&e=="backward"){items[i].classList.toggle("on");if(e=="backward"){i--}else if(e=="forward"){i++}var r=setTimeout(function(){_step(e,t,n)},t)}else{if(n&&typeof n==="function"){n()}}};var _cleanWhitespace=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n.nodeType==3&&!/\S/.test(n.nodeValue)){e.removeChild(n);t--}if(n.nodeType==1){_cleanWhitespace(n)}}return e}